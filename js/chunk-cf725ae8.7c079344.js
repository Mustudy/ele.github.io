(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf725ae8"],{"0d5f":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cityWarp"},[i("header",[i("i",{staticClass:"el-icon-arrow-left",on:{click:t.goHome}}),i("span",{staticClass:"h_city"},[t._v(t._s(t.cityInfo?t.cityInfo.name:""))]),i("router-link",{attrs:{to:"/home"}},[i("span",[t._v("切换城市")])])],1),i("div",{staticClass:"city_form"},[i("div",{staticClass:"i1"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.inputV,expression:"inputV"}],staticClass:"city_input",attrs:{type:"text",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.inputV},on:{input:function(e){e.target.composing||(t.inputV=e.target.value)}}})]),i("div",{staticClass:"i2"},[i("div",{staticClass:"city_submit",on:{click:t.searchPlace}},[t._v("提交")])])]),t.isShowHistoryHeader?i("p",{staticClass:"search_history"},[t._v("搜索历史")]):t._e(),i("ul",t._l(t.placeArr,(function(e){return i("li",{key:e.geohash,on:{click:function(i){return t.choosePlace(e)}}},[i("h4",{staticClass:"ellipsis p_name"},[t._v(t._s(e.name))]),i("p",{staticClass:"ellipsis p_address"},[t._v(t._s(e.address))])])})),0),t.isShowClearBtn?i("div",{staticClass:"clearHistory",on:{click:t.clearAllPlace}},[t._v(" 清空所有 ")]):t._e()])},a=[],c=(i("4de4"),i("b0c0"),{name:"City",data:function(){return{cityId:0,cityInfo:null,inputV:"",placeArr:[],isShowHistoryHeader:!0,isShowClearBtn:!1}},created:function(){var t=this;this.cityId=this.$route.params.cityId,this.axios.get("/v1/cities/"+this.cityId).then((function(e){t.cityInfo=e})).catch((function(t){})),localStorage.getItem("placeHistory")&&(this.placeArr=JSON.parse(localStorage.getItem("placeHistory")),this.isShowClearBtn=!0)},methods:{goHome:function(){this.$router.push({path:"/Home"})},searchPlace:function(){var t=this;this.axios.get("v1/pois",{params:{city_id:this.cityInfo.id,keyword:this.inputV,type:"search"}}).then((function(e){t.placeArr=e,t.isShowHistoryHeader=!1})).catch((function(t){console.log(t)}))},choosePlace:function(t){if(localStorage.setItem("placeNameHistory",JSON.stringify(t)),localStorage.getItem("placeHistory")){var e=JSON.parse(localStorage.getItem("placeHistory")),i=e.filter((function(e){return e.name==t.name}));i.length||(e.push(t),localStorage.setItem("placeHistory",JSON.stringify(e))),this.$router.push({path:"/msite"})}else{var s=[];s.push(t),localStorage.setItem("placeHistory",JSON.stringify(s)),this.$router.push({path:"/msite"})}},clearAllPlace:function(){localStorage.removeItem("placeHistory"),this.placeArr=[],this.isShowClearBtn=!1}}}),o=c,r=(i("68f4"),i("2877")),n=Object(r["a"])(o,s,a,!1,null,"1a7b55fc",null);e["default"]=n.exports},"68f4":function(t,e,i){"use strict";var s=i("dfc9"),a=i.n(s);a.a},dfc9:function(t,e,i){}}]);
//# sourceMappingURL=chunk-cf725ae8.7c079344.js.map